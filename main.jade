head
    title Facet
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no')
    meta(name='mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name='format-detection', content='telephone=no')

template(name='layout')
    .layout.ui.container
        +Template.dynamic template=content

template(name='home')
    .ui.inverted.fixed.menu
        a#home.icon.item
            i.home.icon
        +loginButtons
        if currentUser
            // .item #{user.rating}
            // .item #{user.points} pts
            a#posts.item Mine
            // a#bids.item My Bids
            // a#won.item Won
            .right.menu
                unless $.Session.get 'editing'
                    a#add.header.item Add
    unless $.Session.get 'editing'
        unless $.Session.get 'view'
            .ui.segment
                each selectedtags
                    #toggleOff.ui.large.basic.grey.compact.button
                        | #{this}
                each tags
                    #toggleOn.ui.compact.basic.button
                        |#{name}
                        small #{count}
    .ui.cards
        if posts
            each posts
                .ui.fluid.card
                    +post
        else
            h4 No posts to show

template(name='post')
    if editing
        +edit
    else
        .content
            unless isAuthor
                .right.floated by #{author.username}  #{author.rating} 
            .header
                each tags
                    .ui.basic.large.label.titletag #{this}
            if canEdit
                a#edit.ui.right.blue.corner.label
                    i.pencil.inverted.link.icon
        .content
            .description.froala-view !{body}
        // .content
        //     unless accepted
        //         if canBid
        //             #bid.ui.blue.button(class=bidclass) Bid #{bidinc}
        //         if canAccept
        //             #accept.ui.green.button Accept #{bid}
        //         .ui.large.basic.label
        //             if bidder
        //                 |Highbid #{bid} by #{bidder.username} #{bidder.rating}
        //             else
        //                 |No bids
        //     if canRefund
        //         a#refund Refund and Cancel
        //     if canRecommend
        //         a#recommend Recommend
        //     if canUnrecommend
        //         a#unrecommend Unrecommend
        // .content
        //     if accepted
        //         .ui.green.bottom.left.attached.label Accepted #{bid} from #{bidder.username} #{bidder.rating}
        //     if recommended
        //         .ui.blue.bottom.right.attached.label Recommended


template(name='edit')
    .content
        .ui.form
            .field
                label Tags
                +editableList collection="posts" field="tags" liStyle="margin: 15px 5px 0 0;" class="ui header"
            .field
                label Body
                textarea#editarea.bs #{body}
        .ui.hidden.divider
        .bottomGroup
            #save.ui.basic.green.button(class=saveclass) Save
            #delete.ui.right.floated.small.red.basic.button Delete
