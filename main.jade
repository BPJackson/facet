head
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no')
    meta(name='mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name='format-detection', content='telephone=no')
body
    +home

template(name='home')
    .ui.vertical.inverted.segment
        each filterlist
            .ui.inverted.compact.button.unfilterTag
                strong #{this}
                i.icon.remove
        each globalTags
            .ui.compact.secondary.button.filterTag
                |#{name}
                small #{count}
    .ui.segments.nope
        each items
            .ui.segment
                +item
    .ui.bottom.fixed.inverted.menu
        .item
            +loginButtons
        if currentUser
            a.item.add add

template(name='item')
    if isEditing
        .content
            +editing
            .extra
                .ui.basic.active.button.editing editing
    else
        .content
            .ui.large.grey.labels
                each tags
                    .ui.label.doctag #{this}
        +markdown
            #{body}
        .extra
            if isOwner
                .ui.basic.icon.button.edit
                    i.edit.icon
                    |edit
            if canClone
                .ui.basic.icon.button.clone
                    i.fork.icon
                    |clone
            if canUpvote
                .ui.basic.icon.button.clone
                    i.thumbs.outline.up.icon
                    |29 votes
            if canDownvote
                .ui.basic.icon.button.clone
                    i.thumbs.outline.down.icon
                    |43 votes
            .ui.basic.icon.button.username
                i.user.icon
                |#{username}
            |#{when}

template(name='editing')
    .ui.form
        .field: select#tagselector.bs.ui.multiple.search(multiple='true')
            each tags
                option(value=this selected='selected')= this
        .field: textarea#itembodyarea.bs(placeholder='add markdown')= body